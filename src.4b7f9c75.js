(function () {window.addEventListener("load",function(){var e,t,i,n=document.getElementById("game_canvas"),o=n.getContext("2d"),d=n.width/2,h=n.height-n.height/4,c=10,l=2,a=-2,r=0,s=255,g=0,u=85,m=10,f=80,w=n.width/2-f/2,v=n.height-m-30,y=7,k="red",x=!1,L=0,P=!1;function C(){o.beginPath(),o.font=!0===P?"100px Arial":"150px Arial",o.textAlign="center",o.strokeText(L.toString(),n.width/2,n.height/2),o.closePath()}document.addEventListener("keydown",function(i){39==i.keyCode?e=!0:37==i.keyCode&&(t=!0)},!1),document.addEventListener("keyup",function(i){39==i.keyCode?e=!1:37==i.keyCode&&(t=!1)},!1),n.addEventListener("mousemove",function(e){i=function(e,t){var i=e.getBoundingClientRect();return t.clientX-i.left}(n,e),console.log(i)},!1),n.addEventListener("click",function(){!1===x?(x=!0,n.classList.add("mouseMode")):(x=!1,n.classList.remove("mouseMode"))}),requestAnimationFrame(function E(){o.clearRect(0,0,n.width,n.height),d+l>n.width-c||d+l<c?l=-l:h+a<c?a=-a:h+a>n.height&&(h=-20,d=-20,P=!0,L="Game Over",C(),d=n.width/2,h=n.height-n.height/4,l=0,a=0,r=0,s=255,g=0,w=n.width/2-f/2,v=n.height-m-30,setTimeout(function(){L=0,l=2,a=-2,P=!1},3e3)),e&&w+f<n.width?w+=y:t&&w>0&&(w-=y),!0===x&&(i<f/2||i>n.width-f/2||(w=i-f/2)),d+l>w&&d+l<w+f&&h+a>v-c&&(L++,a=-a,a-=.5,l>0?l+=.5:l-=.5,0===r&&255===s&&g<255?g+=u:0===r&&s<=255&&s>0&&255===g?s-=u:r<255&&0===s&&255===g?r+=u:255===r&&0===s&&g<=255&&g>0?g-=u:255===r&&0===s&&0===g&&(r=0,s=0,g=0,a-=1.5,l+=1.5),console.log("rgb("+r+","+s+","+g+")"),console.log("dx: "+l+", dy: "+a)),o.beginPath(),o.arc(d,h,c,0,2*Math.PI),o.fillStyle="rgb("+r+","+s+","+g+")",o.fill(),o.closePath(),o.beginPath(),o.rect(w,v,f,m),o.fillStyle=k,o.fill(),o.closePath(),C(),d+=l,h+=a,requestAnimationFrame(E)})});})();