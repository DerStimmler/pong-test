(function () {window.addEventListener("load",function(){var e,t,n,i=document.getElementById("game_canvas"),o=i.getContext("2d"),d=i.width/2,l=i.height-i.height/4,a=10,c=2,r=-2,h=0,s=255,g=0,u=85,m=10,f=80,v=i.width/2-f/2,w=i.height-m-30,y=7,k=!1,L=0;document.addEventListener("keydown",function(n){39==n.keyCode?e=!0:37==n.keyCode&&(t=!0)},!1),document.addEventListener("keyup",function(n){39==n.keyCode?e=!1:37==n.keyCode&&(t=!1)},!1),i.addEventListener("mousemove",function(e){n=function(e,t){var n=e.getBoundingClientRect();return t.clientX-n.left}(i,e),console.log(n)},!1),i.addEventListener("click",function(){!1===k?(k=!0,i.classList.add("mouseMode")):(k=!1,i.classList.remove("mouseMode"))}),requestAnimationFrame(function P(){o.clearRect(0,0,i.width,i.height),d+c>i.width-a||d+c<a?c=-c:l+r<a?r=-r:l+r>i.height&&(l=-20,d=-20,alert("Game Over!",location.reload())),e&&v+f<i.width?v+=y:t&&v>0&&(v-=y),!0===k&&(n<f/2||n>i.width-f/2||(v=n-f/2)),d+c>v&&d+c<v+f&&l+r>w-a&&(L++,r=-r,r-=.5,c>0?c+=.5:c-=.5,0===h&&255===s&&g<255?g+=u:0===h&&s<=255&&s>0&&255===g?s-=u:h<255&&0===s&&255===g?h+=u:255===h&&0===s&&g<=255&&g>0?g-=u:255===h&&0===s&&0===g&&(h=0,s=0,g=0,r-=1.5,c+=1.5),console.log("rgb("+h+","+s+","+g+")"),console.log("dx: "+c+", dy: "+r)),o.beginPath(),o.arc(d,l,a,0,2*Math.PI),o.fillStyle="rgb("+h+","+s+","+g+")",o.fill(),o.closePath(),o.beginPath(),o.rect(v,w,f,m),o.fillStyle="red",o.fill(),o.closePath(),o.beginPath(),o.font="150px Arial",o.textAlign="center",o.strokeText(L.toString(),i.width/2,i.height/2),o.closePath(),d+=c,l+=r,requestAnimationFrame(P)})});})();